---
title: S3
---

# S3 - Simple Storage Service

https://aws.amazon.com/s3/

Console: https://console.aws.amazon.com/s3/home or https://s3.console.aws.amazon.com/s3/home

You cannot delete an S3 bucket containing objects. You need to empty it first.

## S3 use cases

From https://www.youtube.com/watch?v=-zc16KhOILM

1. Backups (eg database backups)
   - We can set rules to delete objects that are no longer needed, eg delete database backups older than 7 days
   - We can have versions of the same file
2. [Static website hosting](https://docs.aws.amazon.com/AmazonS3/latest/userguide/WebsiteHosting.html)
   - Note that "Amazon S3 website endpoints do not support HTTPS. If you want to use HTTPS, you can use Amazon CloudFront to serve a static website hosted on Amazon S3"
3. Share files to logged/authorized users with [presigned URLs](https://docs.aws.amazon.com/AmazonS3/latest/userguide/using-presigned-url.html). URLs expire
4. Long term archiving
   - For files that are accessed infrequently, but need to be saved for years
   - There are various [storage classes/tiers](https://aws.amazon.com/s3/storage-classes/): Standard-Infrequent Access, Glacier...
5. Compliance with regulations
   - Eg comply with the GDPR by storing data at the EU, set encryption etc.
6. FTP server
7. Application cache
8. Upload files
   - Since we are not uploading to our server, we don't need to worry about CPU, bandwidth or availability
9. Query data and perform analytics with [Athena](https://aws.amazon.com/athena/), which allows to query data in S3 using SQL
10. S3 triggers/events, eg to fire a lambda functions
11. [S3 Select](https://docs.aws.amazon.com/AmazonS3/latest/userguide/selecting-content-from-objects.html), which allows to retrieve a subset of a file instead of the whole file

## CLI - s3api

Commands: https://docs.aws.amazon.com/cli/latest/reference/s3api/index.html#available-commands

List buckets: `aws s3 ls`

Create bucket

- https://awscli.amazonaws.com/v2/documentation/api/latest/reference/s3api/create-bucket.html
- `aws s3api create-bucket --bucket <bucket-name> --acl <acl> --region <region>`

Delete bucket (must be empty)

- https://awscli.amazonaws.com/v2/documentation/api/latest/reference/s3api/delete-bucket.html
- `aws s3api delete-bucket --bucket <bucket-name>`

Upload file

- https://awscli.amazonaws.com/v2/documentation/api/latest/reference/s3api/put-object.html
- `aws s3api put-object --bucket <bucket-name> --key file.txt --body file.txt`

Delete object

- https://docs.aws.amazon.com/cli/latest/reference/s3api/delete-object.html
- `aws s3api delete-object --bucket <bucket-name> --key <key>`
